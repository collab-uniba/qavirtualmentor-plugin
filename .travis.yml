language: node_js
node_js:
- '10'
before_script:
- npm install
script:
- npm test a

after_script:
- npm run build
- |
    if [ $TRAVIS_BRANCH == "master" && $TRAVIS_PULL_REQUEST == "false" ]; then
      CLIENT_ID=${CLIENT_ID} CLIENT_SECRET=${CLIENT_SECRET} EXTENSION_ID=${EXTENSION_ID}
      REFRESH_TOKEN=${REFRESH_TOKEN} node ./deploy.js
    fi

env:
  global:
  - secure: RETblPShlP3w/YwgmUORqu9ey2Dr+JKI17Spynar1Zovns7hgL4K+++VWxAVo7DkdpCE1LgLmMP76NLK/HvttUa2unTv701lcCh5QtGJMxlKqmt6V+s3bLO45TjnV6Q+LK4uXatldIBQJ5qSWP55w0ltlPBq1SJ9lBcj1L8TBN3H9S3nPvBwhI0JdlaoMF5XdNnswKAYmcABrF/FwidETUUmtTtCiGIzXghiW7+sexvMb21blkcRBIAd+Q2x9h4+xMZS6ZAmlhmtL6YaGer1/pppzkuhEbf6jOg5Qx4X2fN/nJNvebJdIVlAeToPMZsYTXMl3/8Lol7BhdFTZpcC9B+hRfhEVG5BIimWnmjt+3UCgACmXJ8ijh6FDXtlABstEMZTY0t9HdEU54IWQ28mcBbwY3r1BN4AtmC9+ZgPZqApGJRTuzWbpcELvbMmTRZ6g8m2xgWAAmAqZ5ABlbX8qIw7iRG1ZmV+nIrcm9NnteysMDrjn7rgdqsTh37Fu36y1QwXKND4g7Pd+haKWsm9kJ3UTlVvc9gJ2tTOe29QFdo9DJ2WWsG3ZtOVswCL3tZZNL0Qfr8C16ll9p3pIK5I5afv9rqEZIoozRzdhv/CgO/SoUVFtnS55PxWwKswcdLtV2yst6la1PPwW90voQMdNgHnTv5rT0ES9CQqFGeGkcE=
  - secure: Lbf9gqsGxg7JrhJgy6imA7SZMI2LMnAh6suHuz0K6aWZdVmN2Oh6M3W8TTbn7GTfy+VVf4BmEGLpE4CnG7/yVR7oSXUpBvsbKCyoQ1ldpYQgkWqsvWTu3FL8Bh2P92ANaEDnsHcSBkaL8Fl8fCo0yzJB4R+aMtD5SME3eUTvR+I1Bs6pv+4U+S1EPODC3+xPEkuz8BUTJqs2YWoQjFZwowAkN0VoA5RS+FChfFQQ1VqC7qtrNVeVhLpqtyN98Xnyfr1pa+yFIAl6MS1XwZJquMgag9FBAujDCzDBa1mG8/22YpSOUW5XCbVnelVoTp2pXm4JvnlR/ggrB9PT6d3TRAVg/6cgBh4FMU/c/dRh+AmVqn/Ts6DgFI9Le/r8Ge58BDJSzvtUNrcPB5Jo2ym+64AZyx4BjDv2zoQUJNAqu+b4f2EiWOlMrboctuRIqHsiTdRMLayPFNyUkXl86iTSHg/jYG6g+NWPxJCAUvNYHpU0VaoWCtAN1TQPan8RootvlZBZEDKIG4y2P6hhF8dbMaCOT9LvPUiQPsDdEwtYCV0r6QlUOgVsLPxJhlYpG4eWYL8mN7CNzVEt9XXFZz8276tNiol/wVXaEjULE1uw57nmI+38KdXdlmeEuFVYQvZF76kD13MKfwm1qRWHiGej4b+aDczOde6s09XIWM4BJMw=
  - secure: aiJ1eAnQ8o+rIuK8LzZx/jBU/L2QkBTA1itk1miG22jpozmEczwpSWl4To48WsQ6WjpOHAyv8uL2eb+P76Z1nxX//py9I6BhH3c0DunMRCLv+a231HuSrFMZtSs6yUxvcCbd+PTdfl45QaifeCBPH3bpcGqtIeSNlxOR54HBVvLn0W6Xg3gDgb1Gn/GPfwL7FeP7NYtfVGroCvHLLFxcQczchImD7jbCT93JjzWisHlh9nHUXWlY4t6fxeFOrxzmka+XRbKZmAuxYuttroNgHk5qUNZYSwcSi1Vk8KC3sa+/4v45qo8R5bqXyrLKzP+cUy9Rt1JaaYC7vl9tPQndTMSIalQxBuDOm0jVCYFBHAIiPocQmdyZHpFSZ8bMmFEIDRUWqGc2SzQCcb/IsGWboGCNjH38gFNw5tRB6r/+3r+9o2MbcmdFFjC3JPtudhbXRzcpn2DjBxrn9r7T9RuUewe0mzozqK6Yr5e67LbPMgEBfLLmOgPm+of3g6ucoTLtIKD0Kex2Bhe1herZ31c8gLXGgv9B1jO0IXcyI7RCflrXzFmFq5bF61lsZYyqIt8tG3o3Iyor3HYC7x4Lod3YULmCKUjMv2mRgEfTEUSGVeUAWCRRXlX3jhjIam9cb5Rd4PtjF3ovJJxUEEIcus1FRYiTikEdgZ1rp+rR5+d8sw4=
  - secure: SHvG2tF/0zCVJWVo8TduJDyI2tEFc+NK40maJ2myx5+6iocqDHQpP69sr4roaQ3wuUXfIzisJaO7YEvIscfgTrwy7tjvjSTDtwzFyBdjZl5YOyE2pgJf8ygpTbnU93jvbvAtDsrbHM6ehR0IXnqixi9PEXhQqJImBmZwTGXi/v7pH/CIe4/rnjfGvvUCRmwQvdb2xBIRwTg40GUQk9Q99OcahUIY7hWTMbPwKKuEZL3BaJiHpHZiq9YZkQKdUX4Ui2L8V5Q++IVSZdtk5zKbg3Eg0jFlOG/W0Q71PSmpfCO0mCYkDoy3b/M0Vnkpqh9NtN/OPwXcCis4Jmuvu8Y5wDFqNuhZolWtFFEYJqXC+PRiWTScxdxIxrAgd+T3Lfb25HZXarZD5W9ABsxbCL2Z4vknL0VYAPuKRKh6kVohs/117lQr/8oFdxj4sGSAOPqeFFEVlU54L21R7N3xsXrzbp9SxiUVlB+dfzFGLs1s9xjt4Xx/JDVU5K+8BFlQ3+RXdfo3zTvEMntwkPzlSCA0IAoeUFGNTFu5wqOgGn2xb3y+XySna4iCZbMhbDKy2aN4IF65lFVauddsWE2uSbEQ/EEav0t10X5ySHmr84RXIAmiu9TjvIi9H1e8wDvU83VxbFTHuMMYpZ/SUTbH83/ZAFs3d118W+pUbMLmiXYA7Gk=
